<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>iReport - Your Cybercrime Assistant</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="assets/chatbot.css">
    <style>
        .file-upload {
            text-align: center;
            margin: 40px auto;
            padding: 30px;
            background: rgba(255, 255, 255, 0.15);
            border: 2px dashed #4c6ef5;
            border-radius: 12px;
            width: 60%;
            color: #fff;
        }

        .file-upload input[type="file"] {
            display: none;
        }

        .file-upload label {
            display: inline-block;
            padding: 12px 24px;
            background: #4c6ef5;
            color: #fff;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s ease;
            margin: 10px 5px;
        }

        .file-upload label:hover {
            background: #3b5bdb;
        }

        .file-icon {
            font-size: 50px;
            margin-bottom: 20px;
            color: #4c6ef5;
        }

        .file-details {
            margin-top: 15px;
            font-size: 14px;
            color: #eee;
        }

        .file-actions button {
            margin: 10px 5px;
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            color: #fff;
            background: #4c6ef5;
            transition: background 0.3s ease;
        }

        .file-actions button:hover {
            background: #3b5bdb;
        }

        .download-link {
            display: none;
        }
    </style>
</head>
<body>
    <main class="container">
        <header>
            <h1>iReport - Your Cybercrime Assistant</h1>
            <p class="subtitle">Get Learned, Stay Safe.</p>
        </header>

        <!-- File Upload Section -->
        <section class="file-upload" aria-label="File Upload">
            <div class="file-icon">ðŸ“„</div>
            <input type="file" id="fileInput">
            <label for="fileInput">Choose File</label>

            <!-- File Details -->
            <div id="fileDetails" class="file-details" style="display:none;"></div>

            <!-- Action Buttons -->
            <div class="file-actions" style="display:none;">
                <button id="reportBtn">Report</button>
                <button id="downloadBtn">Download</button>
                <a id="downloadLink" class="download-link"></a>
            </div>
        </section>

        <!-- Chatbot -->
        <div id="chat-container"></div>
    </main>

    <script src="assets/chatbot.js"></script>
    <script>
        // Load chatbot
        fetch("assets/chatbot.html")
            .then(response => response.text())
            .then(data => {
                document.getElementById("chat-container").innerHTML = data;
                if (typeof initChat === "function") {
                    initChat();
                }
            });

        // File handling
        const fileInput = document.getElementById("fileInput");
        const fileDetails = document.getElementById("fileDetails");
        const fileActions = document.querySelector(".file-actions");
        const downloadLink = document.getElementById("downloadLink");
        const downloadBtn = document.getElementById("downloadBtn");
        const reportBtn = document.getElementById("reportBtn");

        let uploadedFile = null;

        fileInput.addEventListener("change", (event) => {
            uploadedFile = event.target.files[0];
            if (uploadedFile) {
                fileDetails.style.display = "block";
                fileDetails.textContent = `Selected File: ${uploadedFile.name} (${(uploadedFile.size / 1024).toFixed(2)} KB)`;
                fileActions.style.display = "block";

                // Create downloadable link
                const fileURL = URL.createObjectURL(uploadedFile);
                downloadLink.href = fileURL;
                downloadLink.download = uploadedFile.name;
            }
        });

        // Report button functionality
        reportBtn.addEventListener("click", () => {
            if (uploadedFile) {
                alert(`File "${uploadedFile.name}" reported successfully!`);
                // ðŸš¨ Here you can send the file to your Flask backend via fetch()
            }
        });

        // Download button functionality
        downloadBtn.addEventListener("click", () => {
            if (uploadedFile) {
                downloadLink.click();
            }
        });
    </script>
</body>
</html>
